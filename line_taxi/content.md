Link: https://engineering.linecorp.com/ja/blog/commentary-of-coding-test-2021

# どういう能力が磨かれるか

# 問題
タクシー運賃を計算するプログラムを開発せよ

1. 初乗運賃として1kmまで400円の定額で乗ることができる
2. 走行距離10kmまでは400mごとに40円が加算される
3. 走行距離10km以降は350mごとに40円が加算される
4. 時速10km/h以下の走行時間について、低速運賃として45秒ごとに40円が加算される
5. 深夜12時-朝6時の間、深夜割増料金として初乗運賃や加算時の金額が50%増しになる
6. 朝6時-9時半の間、夕方6時-深夜12時の間、ピークタイム割増料金として初乗運賃や加算時の金額が30％増しになる

このタクシー運賃の計算のために、タクシーは以下の3つのメーターを備え付けている。これらのメーターには、それぞれ実数値が1つだけ記録される。
- 距離メーター
- 低速走行時間メーター
- 運賃メーター

タクシーはメーターを更新するために、時刻と走行距離のペアであるレコードを頻繁に記録している。レコードが記録された時刻に限って、3つのメーターに書かれた実数値が変化しえる。
レコードには二種類あり、1つ目は初乗レコードで、2つ目は走行レコードである。

- 初乗レコード：タクシーに乗車した時に必ず一回だけ記録されるレコードである。このレコードの時刻として、タクシーに乗車した時点での時刻が記録される。
このレコードの走行距離は、常に0であることが保証される。
- 走行レコード：前回のレコードからある程度の時間もしくは距離をタクシーが走った後に、タクシーによって記録されるレコードである。また、乗客がタクシーから降車するタイミングでは、このレコードが必ず記録される。
このレコードの時刻として、タクシーがそのレコードを記録した時点での時刻が記録される。このレコードの走行距離として、直前のレコード取得時から現在の走行レコードの間に走行した距離が記録される。

レコードが記録されたとき、下記の「詳細な仕様」に基づいて、3つのメーターに記録された実数値の内、少なくとも1つが変化する。

あなたは、一人の乗客が乗車して降車するまでにタクシーが出力する多くのレコードをもとに、正しい運賃を計算するプログラムを開発しなければならない。
下記の「入力形式」を満たすレコードが入力されるので、下記の「出力形式」を満たす正しい運賃を表示するプログラムを作成せよ。

## 詳細な仕様
### 入力形式
- レコードは、標準入力にヘッダ行無しのスペース文字で区切られた表形式データとして渡される。
```
13:50:00.245 0.0
13:50:11.123 4.0
13:50:12.125 10.2
13:50:13.100 8.7
```
- 1行目は、初乗レコードである
- 2行目以降の各行は、走行レコードである。
- レコードは、時間軸に沿って並べられている。
  - すなわち、i行に記録されたレコードの時刻は、i+1行に記録されたレコードの時刻よりも前である(1<=i<=n-1, ただしnは総レコード数)。
- すべての行の末尾には必ず改行コード`<LF>`が付与される
- 最終行（最終レコードの改行コードの後）を除いて、空行は存在しない。
- 各行では、区切り文字（半角スペース）一文字で、レコードの時刻と走行距離が区切られている。
  - レコードの時刻
    - `hh:mm:ss.fff`形式である。規定の桁数に満たない数字は`0`で埋められる。
    - 乗車開始後に深夜24時をまたいだ場合、`hh`の後は`00`に戻らずに、`24`,`25`,...と連番で表記される。
    - `hh`が`99`を超え3桁になることはない。それほど長時間を走り続けることはできない。
    - 走行レコードの場合は、前回からのレコードからの経過時間が45秒以内である。
  - レコードの走行距離
    - 初乗レコードの場合は、走行距離には`0.0`と記載されている。
    - 走行レコードの場合は、走行距離は以下の入力形式に従って記載される。
      - 走行レコードに記載された走行距離は、メートル単位である。
      - 少数第一位（10cm）単位まで記録される。少数第一位が`0`の場合は、`XX.0`のように小数点の`0`は省略されずに記載される。
      - 走行距離の範囲は`0.0`以上`99.9`以下である。
- 必ず乗車開始時、終了時の2行以上のデータ行が含まれる。
- 乗車から降車に渡る総走行距離は、0.1メートル以上である。
- 上記の入力形式に反する入力は、**不正な入力**である。
- 入力最大行数は50000行以内であることを前提として良い。
  - すなわち、50000行を超える入力は、本チャレンジのテストケースに含まれておらず、このような入力を不正な入力とみなす処理を書く必要はない。
### 出力形式
- 正常な入力に対しては、運賃（円）を標準出力に出力して、終了コード`0`で終了する。末尾の改行の有無は問わない。
```
1234
```
- 仕様に従わない不正な入力に対しては、標準出力には何も出力せずに、終了コード`0`**以外**で終了する。
- 入力が不正な入力であってもそうでなくても、数キロバイト程度の標準エラー出力は本チャレンジのテストとは無関係である。
### メーターと区間制
#### 距離メーター
- 距離メーターは、レコードに基づいた総走行距離が記録される。
- 乗車時には、距離メーターは0メートルである。
- 距離メーターは、走行レコードごとに記録される。
  - 距離メーターは、走行レコードの時刻の時点で、走行レコードに記載された走行距離が加算される。
#### 低速走行時間メーター
- 低速走行時間メーターは、レコードに基づいた総低速時間が記録される。
- 乗車時には、低速走行時間メーターは0秒である。
- 低速走行時間メーターは、平均速度が10km/h以下であるような走行レコードのことである。
  - 走行レコードの平均速度は、その走行レコードの走行距離を前回のレコードからの経過時間で割ったものである。
  - 低速走行時間メーターには、平均速度が10km/h以下であるような走行レコードの時刻で、前回のレコードからの経過時間が加算される。
#### 運賃メータ
- 運賃メーターには、レコードに基づいた乗車前からの運賃が記録される。
- 乗車開始時に、初乗レコードの時刻に応じて以下の運賃が初乗運賃として記録される
  - レコードの時刻が深夜時間帯（`00:00:00.000`-`05:59:59.999` および `24`時間ずつ足したバリエーション）に入る場合：600円
  - レコードの時刻がビークタイム時間帯（`06:00:00.000`-`09:29:59:.999`, `18:00:00.000`-`23:59:59.999` および `24`時間ずつ足したバリエーション）に入る場合：520円
  - レコードの時刻が通常時間帯（深夜時間帯・ピーク時間帯のどちらでもない時間帯）に入る場合：400円
- 運賃メーターは、距離メーターと低速走行時間メーターの更新時にのみ加算される。
  - 走行距離による運賃は、距離メーターと下記で説明する**距離区間制**によって計算される
  - 低速走行時間による運賃は、低速走行時間メーターと下記で説明する**低速時間区間制**によって計算される。
#### 距離区間制
走行距離に関するタクシーの運賃計算は、距離区間制に基づいて行われる。つまり、総走行距離を距離区間ごとに区切って、その距離区間をまたぐごとに運賃が加算される。

距離区間には三種類が存在する。
1. 初乗距離区間：距離メーターが0m以上、1000m以下の距離区間
2. 短距離区間：距離メーターが1000＋400i mを超え、1000+400(i+1) m以下の距離区間（ただし、iは0以上22以下の整数）
3. 長距離区間：距離メーターが10200+350i mを超え、10200+350(i+1) m以下の距離区間（ただし、iは0以上の整数）

タクシーの走行レコードによって、距離メーターに記録された実数値が距離区間をまたいだ場合、そのレコードの時刻に応じて以下の運賃が運賃メーターに加算される。
- レコードの時刻が深夜時間帯（`00:00:00.000` - `05:59:59.999` および`24`時間ずつ足したバリエーション）に入る場合：60円
- レコードの時刻がビークタイム時間帯（`06:00:00.000`-`09:29:59:.999`, `18:00:00.000`-`23:59:59.999` および `24`時間ずつ足したバリエーション）に入る場合：52円
- レコードの時刻が通常時間帯（深夜時間帯・ピーク時間帯のどちらでもない時間帯）に入る場合：40円

なお、一つの走行レコードの走行距離の範囲は0.0メートル以上99.9以下である一方で、距離区間は最も短い場合でも350メートルと長い。このことから、一つの走行レコードによる距離メーターの更新によって、複数の距離区間を同時にまたぐことは有りえなことに注意せよ。
#### 低速走行時間区間制
低速走行時間に関するタクシーの運賃計算は、低速走行時間区間制に基づいて行われる。つまり、総低速走行時間を低速走行時間区間ごとに区切って、その低速走行時間区間をまたぐごとに運賃が加算される。

低速走行時間区間は、低速走行時間メーターが45i秒以上 45(i+1) m未満の低速走行時間区間が一種類のみ存在する（iは0以上の整数）。
タクシーの走行レコードによって、低速走行時間メーターに記録された実数値が低速走行時間区間をまたいだ場合、そのレコードの時刻に応じて以下の運賃が運賃メーターに加算される。
- レコードの時刻が深夜時間帯（`00:00:00.000` - `05:59:59.999` および`24`時間ずつ足したバリエーション）に入る場合：60円
- レコードの時刻がビークタイム時間帯（`06:00:00.000`-`09:29:59:.999`, `18:00:00.000`-`23:59:59.999` および `24`時間ずつ足したバリエーション）に入る場合：52円
- レコードの時刻が通常時間帯（深夜時間帯・ピーク時間帯のどちらでもない時間帯）に入る場合：40円

なお、どの走行レコードについても、前回のレコードからの経過時間は45秒以内である一方で、低速走行時間区間の時間幅は45秒である。このことから、一つの走行レコードによる低速走行時間メーターの更新によって、複数の低速走行時間区間を同時にまたぐことはありえないことに注意せよ。
#### 最終的な運賃
降車後に運賃メーターに記載されている金額が、最終的に出力すべき運賃である。